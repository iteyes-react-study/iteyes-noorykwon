/* ë™ê¸° & ë¹„ë™ê¸° */

/* 
ì“°ë ˆë“œì˜ task ë“¤ì˜ ì‘ì—…ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ê²½ìš° ì„±ëŠ¥ìƒì˜ ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŒ
js ëŠ” ì‹±ê¸€ì“°ë ˆë“œ ë°©ì‹. => ì“°ë ˆë“œê°€ í•˜ë‚˜ ë”ë¼ë„ ì—¬ëŸ¬ì‘ì—…ì„ ë™ì‹œì— ì‹¤í–‰ì‹œí‚´
ë™ê¸°ì ì´ì§€ ì•Šê²Œ ì—¬ëŸ¬ê°œì˜ ì‘ì—…ì„ ë™ì‹œì— ìˆ˜í–‰í•˜ê²Œ í•˜ëŠ” ë°©ì‹ => ë¹„ë™ê¸°ì²˜ë¦¬ & ë…¼ë¸”ë¡œí‚¹ë°©ì‹(ì“°ë ˆë“œê°€ í•˜ë‚˜ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ ë‹¤ë¥¸ì‘ì—…ì„ í•  ìˆ˜ ìˆìŒ)
*/

// ë™ê¸°ì  ë°©ì‹
function taskA() {
  console.log("A ì‘ì—… ë");
};

taskA();
console.log("ì½”ë“œ ë"); //A ì‘ì—… ëì´ ë¨¼ì € ì°í˜


// ë¹„ë™ê¸°ì  ë°©ì‹
function taskB() {
  setTimeout(()=>{
    console.log("A TASK END");
  }, 20000)
};
 
taskB();
console.log("ì½”ë“œ ë") //"ì½”ë“œ ë"ì´ ë¨¼ì € ì°í˜


function taskC(a, b, cb) {
  setTimeout(()=>{
    const res = a + b;
    cb(res);
  }, 3000)
};
 
taskC(3, 4, (res) => {
  console.log("A TASK RESULT : ", res)
});
console.log("ì½”ë“œ ë"); //"ì½”ë“œ ë"ì´ ë¨¼ì € ì°í˜

/*
JS Engine ì€ ì–´ë–»ê²Œ ë™ê¸°ì ì¸ ì½”ë“œì™€ ë¹„ë™ê¸°ì ì¸ ì½”ë“œë¥¼ êµ¬ë¶„í•˜ëŠ”ê°€?
  Call Stack : ì½”ë“œì˜ ì‹¤í–‰ì— ë”°ë¼ì„œ í˜¸ì¶œ ìŠ¤íƒì„ ìŒ“ëŠ” ì˜ì—­
  ìë°” ìŠ¤í¬ë¦½íŠ¸ëŠ” call stack í•˜ë‚˜ë§Œ ì¡´ì¬. (ì‹±ê¸€ì“°ë ˆë“œ)

  setTimeout í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë“¤ê³¼ëŠ” ë‹¬ë¦¬ ë¹„ë™ê¸° í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— call stack -> web APIs ë¡œ ë„˜ê¹€
  => call stack ì€ ë‹¤ìŒ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ë¨
  setTimeout ì˜ ì½œë°±í•¨ìˆ˜ëŠ” call back Queue ë¡œ ì´ë™ -> call stack(call stack ë‚´ ë©”ì¸ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œì™¸í•œ ë‹¤ë¥¸ í•¨ìˆ˜ê°€ ì—†ì„ ê²½ìš°ì—) ì´ë™
  (event loop ê°€ call stack ë‚´ ë©”ì¸ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œì™¸í•œ ë‹¤ë¥¸ í•¨ìˆ˜ê°€ ìˆëŠ”ì§€ ì§€ì† í™•ì¸)
*/

// ì½œë°±ì´ ê³„ì† ê¹Šì–´ì ¸ì„œ ì½”ë“œì˜ ê°€ë…ì„±ì´ ë–¨ì–´ì§ˆ ë•Œ : ì½œë°± ì§€ì˜¥ğŸ”¥
// Promise ê°ì²´ : ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë¹„ë™ê¸°ì²˜ë¦¬ë¥¼ ë•ëŠ” ê°ì²´. ì§ê´€ì ìœ¼ë¡œ í‘œí˜„ ê°€ëŠ¥ 

/*
ë¹„ë™ê¸° ì‘ì—…ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” 3ê°€ì§€ ìƒíƒœ
  - pending ëŒ€ê¸° ( -> resolve í•´ê²° or reject ê±°ë¶€)
  - fulfiiled ì„±ê³µ 
  - rejected ì‹¤íŒ¨
*/

function isPositive(number, resolve, reject) {
  setTimeout(()=> {
    if(typeof number === 'number') {
      // resolve ë˜ì—ˆì„ ë•Œ
      resolve(number >=0? "ì–‘ìˆ˜" : "ìŒìˆ˜");
    } else {
      // reject ë˜ì—ˆì„ ë•Œ
      reject("ì£¼ì–´ì§„ ê°’ì´ ìˆ«ìí˜• ê°’ì´ ì•„ë‹™ë‹ˆë‹¤.");
    }
  }, 2000)
}

isPositive(10, (res) => {
  console.log("ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰ë¨ :", res)
}, (err) => {
  console.log("ì‹¤íŒ¨ í•˜ì˜€ìŒ : ", err)
})
